!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):e["react-sticky-box"]=t(e.React)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t};var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}})()&&Object.assign;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function s(){}(function(e){e.exports=function(){function e(e,t,n,o,r,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=s,n.PropTypes=n,n}()})(a={exports:{}},a.exports);var a,c=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,o){return e[0]===t&&(n=o,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),o=this.__entries__[n];return o&&o[1]},t.prototype.set=function(t,n){var o=e(this.__entries__,t);~o?this.__entries__[o][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,o=e(n,t);~o&&n.splice(o,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,o=this.__entries__;n<o.length;n++){var r=o[n];e.call(t,r[1],r[0])}},t}()}(),f="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,l="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),h="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(l):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},u=2;var d=20,p=["top","right","bottom","left","width","height","size","weight"],v="undefined"!=typeof MutationObserver,m=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,o=!1,r=0;function i(){n&&(n=!1,e()),o&&a()}function s(){h(i)}function a(){var e=Date.now();if(n){if(e-r<u)return;o=!0}else n=!0,o=!1,setTimeout(s,t);r=e}return a}(this.refresh.bind(this),d)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){f&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),v?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){f&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;p.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),y=function(e,t){for(var n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},g=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||l},b=E(0,0,0,0);function _(e){return parseFloat(e)||0}function w(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+_(e["border-"+n+"-width"])},0)}function O(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return b;var o=g(e).getComputedStyle(e),r=function(e){for(var t={},n=0,o=["top","right","bottom","left"];n<o.length;n++){var r=o[n],i=e["padding-"+r];t[r]=_(i)}return t}(o),i=r.left+r.right,s=r.top+r.bottom,a=_(o.width),c=_(o.height);if("border-box"===o.boxSizing&&(Math.round(a+i)!==t&&(a-=w(o,"left","right")+i),Math.round(c+s)!==n&&(c-=w(o,"top","bottom")+s)),!function(e){return e===g(e).document.documentElement}(e)){var f=Math.round(a+i)-t,l=Math.round(c+s)-n;1!==Math.abs(f)&&(a-=f),1!==Math.abs(l)&&(c-=l)}return E(r.left,r.top,a,c)}var P="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof g(e).SVGGraphicsElement}:function(e){return e instanceof g(e).SVGElement&&"function"==typeof e.getBBox};function T(e){return f?P(e)?function(e){var t=e.getBBox();return E(0,0,t.width,t.height)}(e):O(e):b}function E(e,t,n,o){return{x:e,y:t,width:n,height:o}}var S=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=E(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=T(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),M=function(){return function(e,t){var n,o,r,i,s,a,c,f=(o=(n=t).x,r=n.y,i=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),y(c,{x:o,y:r,width:i,height:s,top:r,right:o+i,bottom:s+r,left:o}),c);y(this,{target:e,contentRect:f})}}(),k=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new c,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof g(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new S(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof g(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new M(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),R="undefined"!=typeof WeakMap?new WeakMap:new c,H=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=m.getInstance(),o=new k(t,n,this);R.set(this,o)}}();["observe","unobserve","disconnect"].forEach(function(e){H.prototype[e]=function(){var t;return(t=R.get(this))[e].apply(t,arguments)}});var C=void 0!==l.ResizeObserver?l.ResizeObserver:H,x=function(e){for(var t=e;t=t.parentElement;){var n=getComputedStyle(t,null).getPropertyValue("overflow-y");if(t===document.body)return window;if("auto"===n||"scroll"===n)return t}return window},B=function(e,t){var n=e,o=0;t.firstChild&&t.firstChild.offsetParent!==t&&(o+=e.offsetTop-t.offsetTop,t=e.offsetParent,o+=-e.offsetTop);do{o+=n.offsetTop,n=n.offsetParent}while(n&&n!==t);return o},j=null;"undefined"!=typeof CSS&&CSS.supports&&(CSS.supports("position","sticky")?j="sticky":CSS.supports("position","-webkit-sticky")&&(j="-webkit-sticky"));var z=!1;try{var A=Object.defineProperty({},"passive",{get:function(){z={passive:!0}}});window.addEventListener("testPassive",null,A),window.removeEventListener("testPassive",null,A)}catch(e){}var L=function(n){function o(e){var t=n.call(this,e)||this;return t.registerContainerRef=function(e){j&&(t.node=e,e?(t.scrollPane=x(t.node),t.latestScrollY=t.scrollPane===window?window.scrollY:t.scrollPane.scrollTop,t.scrollPane.addEventListener("scroll",t.handleScroll,z),t.scrollPane.addEventListener("mousewheel",t.handleScroll,z),t.scrollPane===window?(window.addEventListener("resize",t.handleWindowResize),t.handleWindowResize()):(t.rosp=new C(t.handleScrollPaneResize),t.rosp.observe(t.scrollPane),t.handleScrollPaneResize()),t.ropn=new C(t.handleParentNodeResize),t.ropn.observe(t.node.parentNode),t.handleParentNodeResize(),t.ron=new C(t.handleNodeResize),t.ron.observe(t.node),t.handleNodeResize({initial:!0}),t.initial()):(t.scrollPane.removeEventListener("mousewheel",t.handleScroll,z),t.scrollPane.removeEventListener("scroll",t.handleScroll,z),t.scrollPane===window?window.removeEventListener("resize",t.getMeasurements):t.rosp.disconnect(),t.ropn.disconnect(),t.ron.disconnect(),t.scrollPane=null))},t.getCurrentOffset=function(){if("relative"===t.mode)return t.offset;var e=t.props,n=e.offsetTop,o=e.offsetBottom;return"stickyTop"===t.mode?Math.max(0,t.scrollPaneOffset+t.latestScrollY-t.naturalTop+n):"stickyBottom"===t.mode?Math.max(0,t.scrollPaneOffset+t.latestScrollY+t.viewPortHeight-(t.naturalTop+t.nodeHeight+o)):void 0},t.handleWindowResize=function(){t.viewPortHeight=window.innerHeight,t.scrollPaneOffset=0},t.handleScrollPaneResize=function(){t.viewPortHeight=t.scrollPane.offsetHeight,t.scrollPane.firstChild.offsetParent===t.scrollPane?t.scrollPaneOffset=t.scrollPane.getBoundingClientRect().top:t.scrollPaneOffset=0},t.handleParentNodeResize=function(){var e=t.node.parentNode,n=getComputedStyle(e,null),o=parseInt(n.getPropertyValue("padding-top"),10),r=parseInt(n.getPropertyValue("padding-bottom"),10);t.naturalTop=B(e,t.scrollPane)+o+t.scrollPaneOffset;var i=t.parentHeight;t.parentHeight=e.getBoundingClientRect().height-(o+r),"relative"===t.mode&&i>t.parentHeight&&t.changeToStickyBottomIfBoxTooLow(t.latestScrollY),i!==t.parentHeight&&"relative"===t.mode&&(t.latestScrollY=Number.POSITIVE_INFINITY,t.handleScroll())},t.handleNodeResize=function(e){var n=(void 0===e?{}:e).initial,o=t.nodeHeight;if(t.nodeHeight=t.node.getBoundingClientRect().height,!n&&o!==t.nodeHeight){var r=t.props,i=r.offsetTop,s=r.offsetBottom;if(t.nodeHeight+i+s<=t.viewPortHeight)t.mode=void 0,t.initial();else{var a=t.parentHeight-t.nodeHeight;t.offset=Math.max(0,Math.min(a,t.getCurrentOffset())),t.changeMode("relative")}}},t.handleScroll=function(){var e=t.props,n=e.offsetTop,o=e.offsetBottom,r=t.scrollPane===window?window.scrollY:t.scrollPane.scrollTop;if(r!==t.latestScrollY){if(t.nodeHeight+n+o<=t.viewPortHeight)return t.initial(),void(t.latestScrollY=r);var i=r-t.latestScrollY;t.offset=t.getCurrentOffset(),i>0?"stickyTop"===t.mode?r+t.scrollPaneOffset+n>t.naturalTop&&(r+t.scrollPaneOffset+t.viewPortHeight<=t.naturalTop+t.nodeHeight+t.offset+o?t.changeMode("relative"):t.changeMode("stickyBottom")):"relative"===t.mode&&t.changeToStickyBottomIfBoxTooLow(r):"stickyBottom"===t.mode?t.scrollPaneOffset+r+t.viewPortHeight<t.naturalTop+t.parentHeight+o&&(t.scrollPaneOffset+r+n>=t.naturalTop+t.offset?t.changeMode("relative"):t.changeMode("stickyTop")):"relative"===t.mode&&t.scrollPaneOffset+r+n<t.naturalTop+t.offset&&t.changeMode("stickyTop"),t.latestScrollY=r}},e.offset,t}t(o,n);var r=o.prototype;return r.changeMode=function(e){var t=this.props,n=t.onChangeMode,o=t.offsetTop,r=t.offsetBottom;n(this.mode,e),this.mode=e,"relative"===e?(this.node.style.position="relative",this.node.style.top=this.offset+"px"):(this.node.style.position=j,this.node.style.top="stickyBottom"===e?this.viewPortHeight-this.nodeHeight-r+"px":o+"px"),this.offset=this.getCurrentOffset()},r.initial=function(){this.props.bottom?"stickyBottom"!==this.mode&&this.changeMode("stickyBottom"):"stickyTop"!==this.mode&&this.changeMode("stickyTop")},r.changeToStickyBottomIfBoxTooLow=function(e){var t=this.props.offsetBottom;e+this.scrollPaneOffset+this.viewPortHeight>=this.naturalTop+this.nodeHeight+this.offset+t&&this.changeMode("stickyBottom")},r.render=function(){var t=this.props,n=t.children,o=t.className,r=t.style;return e.createElement("div",{className:o,style:r,ref:this.registerContainerRef},n)},o}(e.Component);return L.defaultProps={onChangeMode:function(){},offsetTop:0,offsetBottom:0},L});
//# sourceMappingURL=react-sticky-box.umd.min.js.map
