{"ast":null,"code":"var _jsxFileName = \"/Users/hettychin/Desktop/UCBerkExtBootcamp2019/Project3/learnlocal-p3/client/src/components/ClassCard/MapClassCard.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from './MapClassCard.css';\nimport ReactMapboxGl from 'react-mapbox-gl';\nconst Map = ReactMapboxGl({\n  accessToken: 'pk.eyJ1IjoibGVhcm5sb2NhbCIsImEiOiJjanlkZ2dram4wcHY1M2ptZm8wNGZrNzVkIn0.SnFaLsmeVQkX5XSj8-pp-A'\n});\nconst chapters = {\n  'baker': {\n    bearing: 27,\n    center: [-0.15591514, 51.51830379],\n    zoom: 15.5,\n    pitch: 20\n  },\n  'aldgate': {\n    duration: 6000,\n    center: [-0.07571203, 51.51424049],\n    bearing: 150,\n    zoom: 15,\n    pitch: 0\n  },\n  'london-bridge': {\n    bearing: 90,\n    center: [-0.08533793, 51.50438536],\n    zoom: 13,\n    speed: 0.6,\n    pitch: 40\n  },\n  'woolwich': {\n    bearing: 90,\n    center: [0.05991101, 51.48752939],\n    zoom: 12.3\n  },\n  'gloucester': {\n    bearing: 45,\n    center: [-0.18335806, 51.49439521],\n    zoom: 15.3,\n    pitch: 20,\n    speed: 0.5\n  },\n  'caulfield-gardens': {\n    bearing: 180,\n    center: [-0.19684993, 51.5033856],\n    zoom: 12.3\n  },\n  'telegraph': {\n    bearing: 90,\n    center: [-0.10669358, 51.51433123],\n    zoom: 17.3,\n    pitch: 40\n  },\n  'charing-cross': {\n    bearing: 90,\n    center: [-0.12416858, 51.50779757],\n    zoom: 14.3,\n    pitch: 20\n  }\n};\nlet activeChapterName = 'baker';\n\nclass MapClassCard extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      center: [-0.15591514, 51.51830379]\n    };\n\n    this.handleScroll = () => {\n      const chapterNames = Object.keys(chapters);\n\n      for (let i = 0; i < chapterNames.length; i++) {\n        let chapterName = chapterNames[i];\n\n        if (this.isElementOnScreen(chapterName)) {\n          console.log('handleScroll | chapterName', chapterName);\n          this.setActiveChapter(chapterName);\n          break;\n        }\n      }\n    };\n\n    this.setActiveChapter = chapterName => {\n      if (chapterName === activeChapterName) return;\n      console.log('setActiveChapter | setState to', chapters[activeChapterName]['center']);\n      this.setState({\n        'center': chapters[activeChapterName]['center']\n      });\n      document.getElementById(chapterName).setAttribute('class', 'active');\n      document.getElementById(activeChapterName).setAttribute('class', '');\n      activeChapterName = chapterName;\n    };\n\n    this.isElementOnScreen = id => {\n      const element = document.getElementById(id);\n      const bounds = element.getBoundingClientRect();\n      return bounds.top < window.innerHeight && bounds.bottom > 0;\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener('scroll', this.handleScroll);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"MapClassCardContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Map, {\n      style: \"mapbox://styles/mapbox/outdoors-v10\",\n      center: this.state.center,\n      className: \"the-map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"features\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      id: \"baker\",\n      class: \"active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"221b Baker St.\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"November 1895. London is shrouded in fog and Sherlock Holmes and Watson pass time restlessly awaiting a new case. \\\"The London criminal is certainly a dull fellow,\\\" Sherlock bemoans. \\\"There have been numerous petty thefts,\\\" Watson offers in response. Just then a telegram arrives from Sherlock's brother Mycroft with a mysterious case.\")), React.createElement(\"section\", {\n      id: \"aldgate\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Aldgate Station\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Arthur Cadogan West was found dead, head crushed in on train tracks at Aldgate Station at 6AM Tuesday morning. West worked at Woolwich Arsenal on the Bruce-Partington submarine, a secret military project. Plans for the submarine had been stolen and seven of the ten missing papers were found in West's possession. Mycroft implores Sherlock to take the case and recover the three missing papers.\"))));\n  }\n\n}\n\nexport default MapClassCard;","map":{"version":3,"sources":["/Users/hettychin/Desktop/UCBerkExtBootcamp2019/Project3/learnlocal-p3/client/src/components/ClassCard/MapClassCard.js"],"names":["React","Link","styles","ReactMapboxGl","Map","accessToken","chapters","bearing","center","zoom","pitch","duration","speed","activeChapterName","MapClassCard","Component","state","handleScroll","chapterNames","Object","keys","i","length","chapterName","isElementOnScreen","console","log","setActiveChapter","setState","document","getElementById","setAttribute","id","element","bounds","getBoundingClientRect","top","window","innerHeight","bottom","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Link } from 'react-router-dom'\nimport styles from './MapClassCard.css'\nimport ReactMapboxGl from 'react-mapbox-gl'\n\nconst Map = ReactMapboxGl({\n  accessToken: 'pk.eyJ1IjoibGVhcm5sb2NhbCIsImEiOiJjanlkZ2dram4wcHY1M2ptZm8wNGZrNzVkIn0.SnFaLsmeVQkX5XSj8-pp-A'\n})\n\nconst chapters = {\n  'baker': {\n    bearing: 27,\n    center: [-0.15591514, 51.51830379],\n    zoom: 15.5,\n    pitch: 20\n  },\n  'aldgate': {\n    duration: 6000,\n    center: [-0.07571203, 51.51424049],\n    bearing: 150,\n    zoom: 15,\n    pitch: 0\n  },\n  'london-bridge': {\n    bearing: 90,\n    center: [-0.08533793, 51.50438536],\n    zoom: 13,\n    speed: 0.6,\n    pitch: 40\n    },\n    'woolwich': {\n    bearing: 90,\n    center: [0.05991101, 51.48752939],\n    zoom: 12.3\n    },\n    'gloucester': {\n    bearing: 45,\n    center: [-0.18335806, 51.49439521],\n    zoom: 15.3,\n    pitch: 20,\n    speed: 0.5\n    },\n    'caulfield-gardens': {\n    bearing: 180,\n    center: [-0.19684993, 51.5033856],\n    zoom: 12.3\n    },\n    'telegraph': {\n    bearing: 90,\n    center: [-0.10669358, 51.51433123],\n    zoom: 17.3,\n    pitch: 40\n    },\n    'charing-cross': {\n    bearing: 90,\n    center: [-0.12416858, 51.50779757],\n    zoom: 14.3,\n    pitch: 20\n    }\n}\n\nlet activeChapterName = 'baker';\n\nclass MapClassCard extends React.Component {\n    state = {\n        center: [-0.15591514, 51.51830379]\n    }\n    componentDidMount() {\n        window.addEventListener('scroll', this.handleScroll);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('scroll', this.handleScroll);\n    }\n\n    handleScroll = () => {\n        const chapterNames = Object.keys(chapters);\n        for (let i = 0; i < chapterNames.length; i++) {\n            let chapterName = chapterNames[i];\n            if (this.isElementOnScreen(chapterName)) {\n                console.log('handleScroll | chapterName', chapterName)\n                this.setActiveChapter(chapterName);\n                break;\n            }\n        }\n    }\n\n    setActiveChapter = (chapterName) => {\n        if (chapterName === activeChapterName) return;\n        console.log('setActiveChapter | setState to', chapters[activeChapterName]['center'])\n        this.setState({'center': chapters[activeChapterName]['center']})\n         \n        document.getElementById(chapterName).setAttribute('class', 'active');\n        document.getElementById(activeChapterName).setAttribute('class', '');\n         \n        activeChapterName = chapterName;\n        }\n\n    isElementOnScreen = (id) => {\n        const element = document.getElementById(id);\n        const bounds = element.getBoundingClientRect();\n        return bounds.top < window.innerHeight && bounds.bottom > 0;\n    }\n\n  render () {\n    return (\n      <div className='MapClassCardContainer'>\n        <Map \n            style='mapbox://styles/mapbox/outdoors-v10' \n            center={this.state.center}\n            className='the-map'\n        />\n        <div id='features'>\n          <section id='baker' class='active'>\n            <h3>221b Baker St.</h3>\n            <p>November 1895. London is shrouded in fog and Sherlock Holmes and Watson pass time restlessly awaiting a new case. \"The London criminal is certainly a dull fellow,\" Sherlock bemoans. \"There have been numerous petty thefts,\" Watson offers in response. Just then a telegram arrives from Sherlock's brother Mycroft with a mysterious case.</p>\n          </section>\n          <section id='aldgate'>\n            <h3>Aldgate Station</h3>\n            <p>Arthur Cadogan West was found dead, head crushed in on train tracks at Aldgate Station at 6AM Tuesday morning. West worked at Woolwich Arsenal on the Bruce-Partington submarine, a secret military project. Plans for the submarine had been stolen and seven of the ten missing papers were found in West's possession. Mycroft implores Sherlock to take the case and recover the three missing papers.</p>\n          </section>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default MapClassCard\n"]},"metadata":{},"sourceType":"module"}